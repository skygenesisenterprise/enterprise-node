{"version":3,"file":"index.js","sourceRoot":"","sources":["index.ts"],"names":[],"mappings":"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","sourcesContent":["import { ModuleInterface } from '../../types';\nimport { WasmRuntime } from '../../core/runtime';\n\nexport interface NotificationOptions {\n  type?: 'info' | 'success' | 'warning' | 'error';\n  duration?: number;\n  position?: 'top-right' | 'top-left' | 'bottom-right' | 'bottom-left';\n}\n\nexport interface ModalOptions {\n  title?: string;\n  content?: string;\n  buttons?: Array<{\n    text: string;\n    action?: () => void;\n    primary?: boolean;\n  }>;\n  closable?: boolean;\n}\n\nexport class Ui implements ModuleInterface {\n  name = 'ui';\n  version = '0.1.0';\n  private runtime: WasmRuntime;\n  private notifications: Array<any> = [];\n\n  constructor(runtime: WasmRuntime) {\n    this.runtime = runtime;\n  }\n\n  async init(): Promise<void> {\n    console.log('UI Module initialized');\n    this.injectStyles();\n  }\n\n  async destroy(): Promise<void> {\n    this.clearAllNotifications();\n    console.log('UI Module destroyed');\n  }\n\n  async notify(message: string, options: NotificationOptions = {}): Promise<{\n    id: string;\n    shown: boolean;\n  }> {\n    try {\n      const notification = {\n        id: `notification_${Date.now()}_${Math.random().toString(36).substr(2, 9)}`,\n        message,\n        type: options.type || 'info',\n        duration: options.duration || 4000,\n        position: options.position || 'top-right',\n        timestamp: Date.now()\n      };\n\n      const result = await this.runtime.call('ui_notify', notification);\n      this.notifications.push(notification);\n\n      if (notification.duration > 0) {\n        setTimeout(() => {\n          this.removeNotification(notification.id);\n        }, notification.duration);\n      }\n\n      return {\n        id: notification.id,\n        shown: result.shown !== false\n      };\n    } catch (error) {\n      console.error('UI notify failed:', error);\n      return this.fallbackNotify(message, options);\n    }\n  }\n\n  async modal(options: ModalOptions = {}): Promise<{\n    id: string;\n    opened: boolean;\n    result?: any;\n  }> {\n    try {\n      const modal = {\n        id: `modal_${Date.now()}_${Math.random().toString(36).substr(2, 9)}`,\n        title: options.title || 'Modal',\n        content: options.content || '',\n        buttons: options.buttons || [{ text: 'OK', primary: true }],\n        closable: options.closable !== false\n      };\n\n      const result = await this.runtime.call('ui_modal', modal);\n      return {\n        id: modal.id,\n        opened: result.opened !== false,\n        result: result.result\n      };\n    } catch (error) {\n      console.error('UI modal failed:', error);\n      return this.fallbackModal(options);\n    }\n  }\n\n  async toast(message: string, type: NotificationOptions['type'] = 'info'): Promise<{\n    id: string;\n    shown: boolean;\n  }> {\n    return this.notify(message, { type, duration: 3000 });\n  }\n\n  removeNotification(id: string): boolean {\n    const index = this.notifications.findIndex(n => n.id === id);\n    if (index > -1) {\n      this.notifications.splice(index, 1);\n      return true;\n    }\n    return false;\n  }\n\n  clearAllNotifications(): void {\n    this.notifications = [];\n  }\n\n  getActiveNotifications(): Array<any> {\n    return [...this.notifications];\n  }\n\n  private fallbackNotify(message: string, options: NotificationOptions): {\n    id: string;\n    shown: boolean;\n  } {\n    const id = `fallback_${Date.now()}`;\n    \n    if (typeof window !== 'undefined') {\n      const notification = document.createElement('div');\n      notification.style.cssText = `\n        position: fixed;\n        top: 20px;\n        right: 20px;\n        background: ${this.getTypeColor(options.type || 'info')};\n        color: white;\n        padding: 12px 20px;\n        border-radius: 4px;\n        z-index: 10000;\n        max-width: 300px;\n        box-shadow: 0 2px 10px rgba(0,0,0,0.2);\n      `;\n      notification.textContent = message;\n      document.body.appendChild(notification);\n\n      setTimeout(() => {\n        if (notification.parentNode) {\n          notification.parentNode.removeChild(notification);\n        }\n      }, options.duration || 4000);\n    }\n\n    return { id, shown: true };\n  }\n\n  private fallbackModal(options: ModalOptions): {\n    id: string;\n    opened: boolean;\n    result?: any;\n  } {\n    const id = `fallback_modal_${Date.now()}`;\n    \n    if (typeof window !== 'undefined') {\n      const result = window.confirm(options.content || options.title || 'Modal');\n      return { id, opened: true, result };\n    }\n\n    return { id, opened: false };\n  }\n\n  private getTypeColor(type: NotificationOptions['type']): string {\n    const colors = {\n      info: '#007bff',\n      success: '#28a745',\n      warning: '#ffc107',\n      error: '#dc3545'\n    };\n    return colors[type] || colors.info;\n  }\n\n  private injectStyles(): void {\n    if (typeof document === 'undefined') return;\n\n    const styleId = 'enterprise-ui-styles';\n    if (document.getElementById(styleId)) return;\n\n    const style = document.createElement('style');\n    style.id = styleId;\n    style.textContent = `\n      .enterprise-notification {\n        position: fixed;\n        z-index: 10000;\n        padding: 12px 20px;\n        border-radius: 4px;\n        color: white;\n        font-family: system-ui, -apple-system, sans-serif;\n        font-size: 14px;\n        box-shadow: 0 2px 10px rgba(0,0,0,0.2);\n        animation: enterprise-slide-in 0.3s ease-out;\n      }\n      \n      @keyframes enterprise-slide-in {\n        from { transform: translateX(100%); opacity: 0; }\n        to { transform: translateX(0); opacity: 1; }\n      }\n    `;\n    document.head.appendChild(style);\n  }\n}\n\nexport default Ui;"]}