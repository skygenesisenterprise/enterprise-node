{"version":3,"file":"index.js","sourceRoot":"","sources":["index.ts"],"names":[],"mappings":"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","sourcesContent":["// import { ModuleInterface } from '@skygenesisenterprise/shared';\n// import { EnterpriseSDK } from '@skygenesisenterprise/enterprise-node';\n\ninterface ModuleInterface {\n  name: string;\n  version: string;\n  init(): Promise<void>;\n  destroy(): Promise<void>;\n}\n\ndeclare class EnterpriseSDK {\n  // Placeholder for EnterpriseSDK type\n}\n\nexport interface SDKMetaInfo {\n  version: string;\n  name: string;\n  description: string;\n  isSelfReferencing: boolean;\n  recursionDepth: number;\n}\n\nexport interface SDKSelfReferenceOptions {\n  enableRecursion?: boolean;\n  maxRecursionDepth?: number;\n  trackMetadata?: boolean;\n}\n\nexport class SDK implements ModuleInterface {\n  name = 'sdk';\n  version = '0.1.0';\n\n  private parentSDK: EnterpriseSDK | null = null;\n  private childSDKs: SDK[] = [];\n  private metaInfo: SDKMetaInfo;\n  private options: SDKSelfReferenceOptions;\n\n  constructor(options: SDKSelfReferenceOptions = {}) {\n    this.options = {\n      enableRecursion: true,\n      maxRecursionDepth: 3,\n      trackMetadata: true,\n      ...options,\n    };\n\n    this.metaInfo = {\n      version: this.version,\n      name: 'Enterprise SDK Module',\n      description: 'Auto-r√©f√©rence et m√©ta-sdk',\n      isSelfReferencing: true,\n      recursionDepth: 0,\n    };\n  }\n\n  async init(): Promise<void> {\n    console.log('üîÑ Initializing SDK module with self-reference capability...');\n\n    try {\n      // Auto-r√©f√©rence : cr√©er une instance du SDK parent\n      if (\n        this.options.enableRecursion &&\n        this.metaInfo.recursionDepth < (this.options.maxRecursionDepth || 3)\n      ) {\n        await this.createSelfReference();\n      }\n\n      console.log(`‚úÖ SDK module initialized (depth: ${this.metaInfo.recursionDepth})`);\n    } catch (error) {\n      console.error('‚ùå Failed to initialize SDK module:', error);\n      throw error;\n    }\n  }\n\n  async destroy(): Promise<void> {\n    console.log('üîÑ Destroying SDK module...');\n\n    // D√©truire tous les SDK enfants\n    for (const child of this.childSDKs) {\n      await child.destroy();\n    }\n    this.childSDKs = [];\n\n    // D√©truire la r√©f√©rence parente\n    this.parentSDK = null;\n\n    console.log('‚úÖ SDK module destroyed');\n  }\n\n  isInitialized(): boolean {\n    return this.parentSDK !== null || this.childSDKs.length > 0;\n  }\n\n  // Fonctionnalit√© d'auto-r√©f√©rence\n  async createSelfReference(): Promise<SDK> {\n    if (!this.options.enableRecursion) {\n      throw new Error('Self-reference is disabled');\n    }\n\n    if (this.metaInfo.recursionDepth >= (this.options.maxRecursionDepth || 3)) {\n      console.warn('‚ö†Ô∏è Maximum recursion depth reached');\n      return this;\n    }\n\n    try {\n      // Cr√©er une nouvelle instance du SDK avec une profondeur incr√©ment√©e\n      const childSDK = new SDK({\n        ...this.options,\n        maxRecursionDepth: (this.options.maxRecursionDepth || 3) - 1,\n      });\n\n      childSDK.metaInfo.recursionDepth = this.metaInfo.recursionDepth + 1;\n\n      // Initialiser le SDK enfant\n      await childSDK.init();\n\n      this.childSDKs.push(childSDK);\n\n      console.log(`üîó Created self-reference at depth ${childSDK.metaInfo.recursionDepth}`);\n\n      return childSDK;\n    } catch (error) {\n      console.error('‚ùå Failed to create self-reference:', error);\n      throw error;\n    }\n  }\n\n  // Obtenir des informations sur le SDK\n  getMetaInfo(): SDKMetaInfo {\n    return {\n      ...this.metaInfo,\n      childCount: this.childSDKs.length,\n      hasParent: this.parentSDK !== null,\n    } as SDKMetaInfo;\n  }\n\n  // Obtenir tous les SDK enfants\n  getChildSDKs(): SDK[] {\n    return [...this.childSDKs];\n  }\n\n  // Obtenir le SDK parent\n  getParentSDK(): EnterpriseSDK | null {\n    return this.parentSDK;\n  }\n\n  // Ex√©cuter une fonction sur tous les SDK de la hi√©rarchie\n  async executeOnHierarchy<T>(fn: (sdk: SDK, depth: number) => Promise<T>): Promise<T[]> {\n    const results: T[] = [];\n\n    // Ex√©cuter sur le SDK actuel\n    results.push(await fn(this, this.metaInfo.recursionDepth));\n\n    // Ex√©cuter r√©cursivement sur les enfants\n    for (const child of this.childSDKs) {\n      const childResults = await child.executeOnHierarchy(fn);\n      results.push(...childResults);\n    }\n\n    return results;\n  }\n\n  // Obtenir des statistiques sur la hi√©rarchie\n  getHierarchyStats(): {\n    totalSDKs: number;\n    maxDepth: number;\n    currentDepth: number;\n    isRecursive: boolean;\n  } {\n    let totalSDKs = 1; // Compter le SDK actuel\n    let maxDepth = this.metaInfo.recursionDepth;\n\n    for (const child of this.childSDKs) {\n      const childStats = child.getHierarchyStats();\n      totalSDKs += childStats.totalSDKs;\n      maxDepth = Math.max(maxDepth, childStats.maxDepth);\n    }\n\n    return {\n      totalSDKs,\n      maxDepth,\n      currentDepth: this.metaInfo.recursionDepth,\n      isRecursive: this.childSDKs.length > 0,\n    };\n  }\n\n  // Nettoyer la hi√©rarchie\n  async cleanupHierarchy(): Promise<void> {\n    // D√©truire tous les enfants\n    for (const child of this.childSDKs) {\n      await child.destroy();\n    }\n    this.childSDKs = [];\n\n    console.log('üßπ SDK hierarchy cleaned up');\n  }\n}\n\nexport const manifest = {\n  name: 'sdk',\n  version: '0.1.0',\n  description: 'Enterprise SDK Module - Auto-r√©f√©rence et m√©ta-sdk',\n  author: 'Sky Genesis Enterprise',\n  dependencies: ['@skygenesisenterprise/shared', '@skygenesisenterprise/enterprise-node'],\n  exports: {\n    '.': './index.js',\n  },\n  runtime: 'hybrid' as const,\n};\n\nexport default SDK;\n"]}