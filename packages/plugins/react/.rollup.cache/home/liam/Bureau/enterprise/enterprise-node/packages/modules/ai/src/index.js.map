{"version":3,"file":"index.js","sourceRoot":"","sources":["index.ts"],"names":[],"mappings":"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","sourcesContent":["// import { ModuleInterface, EnterpriseConfig } from '@skygenesisenterprise/shared';\n// import { WasmRuntime } from '@skygenesisenterprise/core';\n// import { Logger } from '@skygenesisenterprise/shared';\n\nexport interface AIEnhanceOptions {\n  quality?: 'low' | 'medium' | 'high' | 'ultra';\n  format?: 'jpeg' | 'png' | 'webp';\n  upscale?: boolean;\n  denoise?: boolean;\n}\n\nexport interface AIGenerateOptions {\n  model?: string;\n  maxTokens?: number;\n  temperature?: number;\n  topP?: number;\n  frequencyPenalty?: number;\n  presencePenalty?: number;\n}\n\nexport interface AIAnalyzeOptions {\n  type?: 'sentiment' | 'entities' | 'keywords' | 'summary' | 'comprehensive';\n  language?: string;\n}\n\nexport interface AIEnhanceResult {\n  enhanced: boolean;\n  data: any;\n  metadata: {\n    originalSize: number;\n    enhancedSize: number;\n    processingTime: number;\n    algorithm: string;\n    quality: string;\n  };\n}\n\nexport interface AIGenerateResult {\n  text: string;\n  usage: {\n    promptTokens: number;\n    completionTokens: number;\n    totalTokens: number;\n  };\n  metadata: {\n    model: string;\n    processingTime: number;\n    finishReason: string;\n  };\n}\n\nexport interface AIAnalyzeResult {\n  insights: any[];\n  confidence: number;\n  metadata: {\n    analysisType: string;\n    processingTime: number;\n    model: string;\n  };\n}\n\nexport class Ai {\n  name = 'ai';\n  version = '0.1.0';\n  // private runtime: WasmRuntime;\n  // private config: EnterpriseConfig;\n  // private logger = Logger.getInstance();\n  private isInitializedModule = false;\n\n  constructor() {\n    // this.runtime = runtime;\n    // this.config = config;\n  }\n\n  async init(): Promise<void> {\n    // this.logger.info('ai', 'Initializing AI module...');\n\n    try {\n      // Initialize AI-specific resources\n      // await this.runtime.call('ai_init', this.config.modules.ai);\n\n      this.isInitializedModule = true;\n      // this.logger.info('ai', 'AI module initialized successfully');\n    } catch (error) {\n      // this.logger.error('ai', 'Failed to initialize AI module', { error });\n      throw error;\n    }\n  }\n\n  async destroy(): Promise<void> {\n    // this.logger.info('ai', 'Destroying AI module...');\n\n    try {\n      // await this.runtime.call('ai_destroy');\n      this.isInitializedModule = false;\n      // this.logger.info('ai', 'AI module destroyed');\n    } catch (error) {\n      // this.logger.error('ai', 'Error destroying AI module', { error });\n    }\n  }\n\n  isInitialized(): boolean {\n    return this.isInitializedModule;\n  }\n\n  async enhance(\n    image: File | ArrayBuffer | string,\n    options: AIEnhanceOptions = {}\n  ): Promise<AIEnhanceResult> {\n    this.ensureInitialized();\n\n    // const startTime = performance.now();\n    // this.logger.debug('ai', 'Enhancing image', { options });\n\n    try {\n      // const result = await this.runtime.call('ai_enhance', image, {\n      //   quality: options.quality || 'high',\n      //   format: options.format || 'jpeg',\n      //   upscale: options.upscale !== false,\n      //   denoise: options.denoise !== false,\n      //   ...options\n      // });\n\n      // const processingTime = performance.now() - startTime;\n\n      // this.logger.info('ai', 'Image enhanced successfully', {\n      //   processingTime,\n      //   quality: options.quality || 'high'\n      // });\n\n      return {\n        enhanced: true,\n        data: image,\n        metadata: {\n          originalSize: 0,\n          enhancedSize: 0,\n          processingTime: 0,\n          algorithm: 'euse-enhance-v0.1.0',\n          quality: options.quality || 'high',\n        },\n      };\n    } catch (error) {\n      // this.logger.error('ai', 'Failed to enhance image', { error });\n      throw new Error(\n        `AI enhance failed: ${error instanceof Error ? error.message : 'Unknown error'}`\n      );\n    }\n  }\n\n  async generate(prompt: string, options: AIGenerateOptions = {}): Promise<AIGenerateResult> {\n    this.ensureInitialized();\n\n    // const startTime = performance.now();\n    // this.logger.debug('ai', 'Generating text', { prompt: prompt.substring(0, 100), options });\n\n    try {\n      // const result = await this.runtime.call('ai_generate', prompt, {\n      //   model: options.model || 'euse-generate-v0.1.0',\n      //   maxTokens: options.maxTokens || 1000,\n      //   temperature: options.temperature || 0.7,\n      //   topP: options.topP || 1.0,\n      //   frequencyPenalty: options.frequencyPenalty || 0.0,\n      //   presencePenalty: options.presencePenalty || 0.0,\n      //   ...options\n      // });\n\n      // const processingTime = performance.now() - startTime;\n\n      // this.logger.info('ai', 'Text generated successfully', {\n      //   processingTime,\n      //   model: options.model || 'euse-generate-v0.1.0',\n      //   tokens: result.usage?.totalTokens || 0\n      // });\n\n      return {\n        text: `Generated response for: ${prompt.substring(0, 50)}...`,\n        usage: {\n          promptTokens: prompt.length,\n          completionTokens: 50,\n          totalTokens: prompt.length + 50,\n        },\n        metadata: {\n          model: options.model || 'euse-generate-v0.1.0',\n          processingTime: 0,\n          finishReason: 'completed',\n        },\n      };\n    } catch (error) {\n      // this.logger.error('ai', 'Failed to generate text', { error });\n      throw new Error(\n        `AI generate failed: ${error instanceof Error ? error.message : 'Unknown error'}`\n      );\n    }\n  }\n\n  async analyze(_data: any, options: AIAnalyzeOptions = {}): Promise<AIAnalyzeResult> {\n    this.ensureInitialized();\n\n    // const startTime = performance.now();\n    // this.logger.debug('ai', 'Analyzing data', { type: options.type, dataType: typeof data });\n\n    try {\n      // const result = await this.runtime.call('ai_analyze', data, {\n      //   type: options.type || 'comprehensive',\n      //   language: options.language || 'auto',\n      //   ...options\n      // });\n\n      // const processingTime = performance.now() - startTime;\n\n      // this.logger.info('ai', 'Data analyzed successfully', {\n      //   processingTime,\n      //   analysisType: options.type || 'comprehensive',\n      //   insightsCount: result.insights?.length || 0\n      // });\n\n      return {\n        insights: [{ type: 'sample', value: 'analysis result' }],\n        confidence: 0.85,\n        metadata: {\n          analysisType: options.type || 'comprehensive',\n          processingTime: 0,\n          model: 'euse-analyze-v0.1.0',\n        },\n      };\n    } catch (error) {\n      // this.logger.error('ai', 'Failed to analyze data', { error });\n      throw new Error(\n        `AI analyze failed: ${error instanceof Error ? error.message : 'Unknown error'}`\n      );\n    }\n  }\n\n  async getModels(): Promise<{\n    models: Array<{\n      id: string;\n      name: string;\n      type: 'text' | 'image' | 'multimodal';\n      capabilities: string[];\n    }>;\n  }> {\n    this.ensureInitialized();\n\n    try {\n      // const result = await this.runtime.call('ai_get_models');\n      return {\n        models: [\n          {\n            id: 'euse-generate-v0.1.0',\n            name: 'EUSE Generate',\n            type: 'text',\n            capabilities: ['text-generation', 'completion', 'chat'],\n          },\n          {\n            id: 'euse-enhance-v0.1.0',\n            name: 'EUSE Enhance',\n            type: 'image',\n            capabilities: ['image-enhancement', 'upscale', 'denoise'],\n          },\n          {\n            id: 'euse-analyze-v0.1.0',\n            name: 'EUSE Analyze',\n            type: 'multimodal',\n            capabilities: ['sentiment-analysis', 'entity-extraction', 'summarization'],\n          },\n        ],\n      };\n    } catch (error) {\n      // this.logger.error('ai', 'Failed to get models', { error });\n      return { models: [] };\n    }\n  }\n\n  private ensureInitialized(): void {\n    if (!this.isInitializedModule) {\n      throw new Error('AI module not initialized. Call init() first.');\n    }\n  }\n}\n\nexport const manifest = {\n  name: 'ai',\n  version: '0.1.0',\n  description: 'Enterprise AI Module - Intelligence artificielle et génération',\n  author: 'Sky Genesis Enterprise',\n  dependencies: [],\n  exports: {\n    '.': './index.js',\n  },\n  runtime: 'hybrid' as const,\n};\n\nexport default Ai;\n"]}