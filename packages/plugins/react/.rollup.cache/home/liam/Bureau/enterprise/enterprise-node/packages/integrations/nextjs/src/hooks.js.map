{"version":3,"file":"hooks.js","sourceRoot":"","sources":["hooks.ts"],"names":[],"mappings":"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","sourcesContent":["import { useEffect, useState, useCallback, useMemo } from 'react';\nimport { EnterpriseSDK, EnterpriseConfig } from '@skygenesisenterprise/enterprise-node';\nimport { useRouter, usePathname, useSearchParams } from 'next/navigation';\nimport { useRouter as usePagesRouter } from 'next/router';\n\n// Types pour le bridge Next.js\nexport interface NextjsEnterpriseOptions extends EnterpriseConfig {\n  /** Activer le mode App Router (défaut: true) */\n  appRouter?: boolean;\n  /** Configuration des routes automatiques */\n  autoRouting?: {\n    /** Activer les routes protégées automatiquement */\n    protected?: boolean;\n    /** Routes publiques (ne nécessitent pas d'auth) */\n    publicRoutes?: string[];\n    /** Page de redirection pour auth */\n    loginRedirect?: string;\n  };\n  /** Configuration du cache Next.js */\n  cache?: {\n    /** Activer le cache intelligent */\n    enabled?: boolean;\n    /** Durée du cache en secondes */\n    ttl?: number;\n  };\n  /** Modules Next.js à charger */\n  nextjsModules?: string[];\n}\n\nexport interface UseNextjsEnterpriseReturn {\n  /** SDK Enterprise initialisé */\n  sdk: EnterpriseSDK | null;\n  /** État d'initialisation */\n  isInitialized: boolean;\n  /** État de chargement */\n  isLoading: boolean;\n  /** Erreur d'initialisation */\n  error: Error | null;\n  /** Router Next.js (App Router ou Pages Router) */\n  router: any;\n  /** Informations sur la page actuelle */\n  pageInfo: {\n    pathname: string;\n    query: Record<string, string>;\n    params?: Record<string, string>;\n  };\n  /** Fonctions utilitaires Next.js */\n  utils: {\n    /** Navigation programmatique */\n    navigate: (href: string, options?: any) => Promise<void>;\n    /** Rechargement de la page */\n    reload: () => void;\n    /** Retour en arrière */\n    back: () => void;\n  };\n  /** Initialiser manuellement le SDK */\n  initialize: () => Promise<void>;\n  /** Détruire le SDK */\n  destroy: () => Promise<void>;\n}\n\n/**\n * Hook principal pour Next.js Enterprise Bridge\n * Fournit un accès transparent au SDK Enterprise avec les fonctionnalités Next.js\n */\nexport function useNextjsEnterprise(options: NextjsEnterpriseOptions): UseNextjsEnterpriseReturn {\n  const [isInitialized, setIsInitialized] = useState(false);\n  const [isLoading, setIsLoading] = useState(false);\n  const [error, setError] = useState<Error | null>(null);\n  const [sdk, setSdk] = useState<EnterpriseSDK | null>(null);\n\n  // Détection du type de router\n  const isAppRouter = options.appRouter !== false;\n\n  // Hooks Next.js selon le type de router\n  const appRouter = isAppRouter ? useRouter() : null;\n  const pagesRouter = !isAppRouter ? usePagesRouter() : null;\n  const pathname = usePathname();\n  const searchParams = useSearchParams();\n\n  // Router unifié\n  const router = useMemo(() => {\n    return isAppRouter ? appRouter : pagesRouter;\n  }, [isAppRouter, appRouter, pagesRouter]);\n\n  // Informations sur la page actuelle\n  const pageInfo = useMemo(() => {\n    if (isAppRouter && pathname && searchParams) {\n      const query: Record<string, string> = {};\n      searchParams.forEach((value, key) => {\n        query[key] = value;\n      });\n\n      return {\n        pathname,\n        query,\n        params: {}, // À extraire des params dynamiques si nécessaire\n      };\n    } else if (!isAppRouter && pagesRouter) {\n      return {\n        pathname: pagesRouter.pathname,\n        query: pagesRouter.query as Record<string, string>,\n        params: {},\n      };\n    }\n\n    return { pathname: '', query: {}, params: {} };\n  }, [isAppRouter, pathname, searchParams, pagesRouter]);\n\n  // Initialisation du SDK\n  const initialize = useCallback(async () => {\n    if (isInitialized || isLoading) return;\n\n    setIsLoading(true);\n    setError(null);\n\n    try {\n      const enterpriseSdk = new EnterpriseSDK(options);\n      await enterpriseSdk.initialize();\n\n      setSdk(enterpriseSdk);\n      setIsInitialized(true);\n\n      // Configuration des routes protégées si activé\n      if (options.autoRouting?.protected && enterpriseSdk.auth) {\n        const isPublicRoute = options.autoRouting.publicRoutes?.includes(pageInfo.pathname);\n        const isAuthenticated = await (enterpriseSdk.auth as any).isAuthenticated?.();\n\n        if (!isPublicRoute && !isAuthenticated) {\n          const loginRedirect = options.autoRouting.loginRedirect || '/login';\n          if (isAppRouter) {\n            await appRouter?.push(loginRedirect);\n          } else {\n            await pagesRouter?.push(loginRedirect);\n          }\n        }\n      }\n    } catch (err) {\n      const error = err instanceof Error ? err : new Error('Failed to initialize Enterprise SDK');\n      setError(error);\n      console.error('Enterprise SDK initialization failed:', error);\n    } finally {\n      setIsLoading(false);\n    }\n  }, [isInitialized, isLoading, options, pageInfo.pathname, isAppRouter, appRouter, pagesRouter]);\n\n  // Destruction du SDK\n  const destroy = useCallback(async () => {\n    if (sdk) {\n      await sdk.destroy();\n      setSdk(null);\n      setIsInitialized(false);\n      setError(null);\n    }\n  }, [sdk]);\n\n  // Fonctions utilitaires Next.js\n  const utils = useMemo(\n    () => ({\n      navigate: async (href: string, options?: any) => {\n        if (isAppRouter) {\n          await appRouter?.push(href);\n        } else {\n          await pagesRouter?.push(href, options?.as, options);\n        }\n      },\n      reload: () => {\n        if (isAppRouter) {\n          appRouter?.refresh();\n        } else {\n          pagesRouter?.reload();\n        }\n      },\n      back: () => {\n        if (isAppRouter) {\n          window.history.back();\n        } else {\n          pagesRouter?.back();\n        }\n      },\n    }),\n    [isAppRouter, appRouter, pagesRouter]\n  );\n\n  // Initialisation automatique\n  useEffect(() => {\n    initialize();\n\n    return () => {\n      destroy();\n    };\n  }, []);\n\n  return {\n    sdk,\n    isInitialized,\n    isLoading,\n    error,\n    router,\n    pageInfo,\n    utils,\n    initialize,\n    destroy,\n  };\n}\n\n/**\n * Hook simplifié pour l'authentification Next.js\n */\nexport function useNextjsAuth() {\n  const { sdk, isInitialized, utils } = useNextjsEnterprise({\n    modules: {},\n    autoRouting: {\n      protected: true,\n      publicRoutes: ['/login', '/register', '/forgot-password'],\n      loginRedirect: '/login',\n    },\n  });\n\n  const [user, setUser] = useState<any>(null);\n  const [isAuthenticated, setIsAuthenticated] = useState(false);\n\n  useEffect(() => {\n    if (isInitialized && sdk?.auth) {\n      const currentUser = (sdk.auth as any).getCurrentUser?.();\n      const authenticated = (sdk.auth as any).isAuthenticated?.();\n      setUser(currentUser);\n      setIsAuthenticated(authenticated || false);\n    }\n  }, [isInitialized, sdk]);\n\n  const login = useCallback(\n    async (credentials: any) => {\n      if (!sdk?.auth) throw new Error('Auth module not available');\n\n      const result = await (sdk.auth as any).login(credentials);\n      setUser(result.user);\n      setIsAuthenticated(true);\n\n      // Redirection vers la page précédente ou dashboard\n      const returnUrl =\n        new URLSearchParams(window.location.search).get('returnUrl') || '/dashboard';\n      await utils.navigate(returnUrl);\n\n      return result;\n    },\n    [sdk, utils]\n  );\n\n  const logout = useCallback(async () => {\n    if (!sdk?.auth) throw new Error('Auth module not available');\n\n    await (sdk.auth as any).logout();\n    setUser(null);\n    setIsAuthenticated(false);\n\n    // Redirection vers la page de login\n    await utils.navigate('/login');\n  }, [sdk, utils]);\n\n  return {\n    user,\n    isAuthenticated,\n    login,\n    logout,\n    isAvailable: isInitialized && !!sdk?.auth,\n  };\n}\n\n/**\n * Hook pour le stockage avec cache Next.js\n */\nexport function useNextjsStorage() {\n  const { sdk, isInitialized } = useNextjsEnterprise({ modules: {} });\n  const [isUploading, setIsUploading] = useState(false);\n\n  const save = useCallback(\n    async (file: any, options?: any) => {\n      if (!isInitialized || !sdk) {\n        throw new Error('Enterprise SDK not initialized');\n      }\n\n      setIsUploading(true);\n      try {\n        const result = await (sdk.storage as any).save(file, options);\n\n        // Invalider le cache Next.js si nécessaire\n        if (typeof window !== 'undefined' && 'next' in window) {\n          // Cache invalidation logic here\n        }\n\n        return result;\n      } finally {\n        setIsUploading(false);\n      }\n    },\n    [sdk, isInitialized]\n  );\n\n  const load = useCallback(\n    async (path: string, options?: any) => {\n      if (!isInitialized || !sdk) {\n        throw new Error('Enterprise SDK not initialized');\n      }\n\n      return await (sdk.storage as any).load(path, options);\n    },\n    [sdk, isInitialized]\n  );\n\n  return {\n    save,\n    load,\n    isUploading,\n    isAvailable: isInitialized && !!sdk?.storage,\n  };\n}\n\n/**\n * Hook pour l'IA avec streaming Next.js\n */\nexport function useNextjsAI() {\n  const { sdk, isInitialized } = useNextjsEnterprise({ modules: {} });\n  const [isProcessing, setIsProcessing] = useState(false);\n\n  const generateStream = useCallback(\n    async (prompt: string, options?: any) => {\n      if (!isInitialized || !sdk) {\n        throw new Error('Enterprise SDK not initialized');\n      }\n\n      setIsProcessing(true);\n      try {\n        // Utiliser le streaming si disponible dans Next.js\n        const response = await fetch('/api/ai/generate', {\n          method: 'POST',\n          headers: {\n            'Content-Type': 'application/json',\n          },\n          body: JSON.stringify({ prompt, ...options }),\n        });\n\n        if (!response.body) {\n          throw new Error('Streaming not supported');\n        }\n\n        const reader = response.body.getReader();\n        const decoder = new TextDecoder();\n        let result = '';\n\n        while (true) {\n          const { done, value } = await reader.read();\n          if (done) break;\n\n          const chunk = decoder.decode(value);\n          result += chunk;\n\n          // Callback pour le streaming\n          options?.onChunk?.(chunk);\n        }\n\n        return result;\n      } finally {\n        setIsProcessing(false);\n      }\n    },\n    [sdk, isInitialized]\n  );\n\n  const generate = useCallback(\n    async (prompt: string, options?: any) => {\n      if (!isInitialized || !sdk) {\n        throw new Error('Enterprise SDK not initialized');\n      }\n\n      setIsProcessing(true);\n      try {\n        return await (sdk.ai as any).generate(prompt, options);\n      } finally {\n        setIsProcessing(false);\n      }\n    },\n    [sdk, isInitialized]\n  );\n\n  return {\n    generate,\n    generateStream,\n    isProcessing,\n    isAvailable: isInitialized && !!sdk?.ai,\n  };\n}\n"]}